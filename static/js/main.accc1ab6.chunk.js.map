{"version":3,"sources":["play_circle_black_24dp.svg","pomus/0/please_wait.png","pomus/0/puffing_the_pomus.png","pomus/1/p1.png","pomus/2/walfie_pomu_chibi_1.gif","pomus/3/walfie_pomu_chibi_2.gif","pomus/4/walfie_pomu_chibi_3.gif","pomus/walfie_finana_chibi_1.gif","usePomus.tsx","App.tsx","index.tsx"],"names":["pct","n","ltdim","left","top","width","height","x","y","OBJECT_GROUP_KEYS","OBJECT_GROUPS","bg_text","src","puffing_the_pomus","props","initial","opacity","animate","transition","duration","repeat","Infinity","times","style","position","please_wait","original_pomus","p1","rotate","ease","t","walfie_pomu_chibi_1","walfie_pomu_chibi_2","walfie_pomu_chibi_3","walfie_finana_chibi_1","walfie_pomu_chibi_3b","VERSIONS","MAX_POMUS","length","App","audio","useRef","main","stage","useState","containerSize","setContainerSize","paused","setPaused","pomus","setPomus","shape","setShape","window","innerWidth","innerHeight","windowSize","setWindowSize","objectGroups","useMemo","Map","map","key","object","index","motion","div","className","alt","pomuElements","List","get","usePomus","play","useCallback","current","volume","useEffect","setInterval","debounce","handler","clearTimeout","setTimeout","addEventListener","removeEventListener","offsetWidth","offsetHeight","type","min","max","onChange","e","parseInt","currentTarget","value","ref","playCircle","onClick","toJS","autoPlay","loop","process","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.accc1ab6.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/play_circle_black_24dp.30b84ade.svg\";","export default __webpack_public_path__ + \"static/media/please_wait.cf6a42fc.png\";","export default __webpack_public_path__ + \"static/media/puffing_the_pomus.7cf6e691.png\";","export default __webpack_public_path__ + \"static/media/p1.26538280.png\";","export default __webpack_public_path__ + \"static/media/walfie_pomu_chibi_1.e61780b0.gif\";","export default __webpack_public_path__ + \"static/media/walfie_pomu_chibi_2.843b2ae8.gif\";","export default __webpack_public_path__ + \"static/media/walfie_pomu_chibi_3.b8e44366.gif\";","export default __webpack_public_path__ + \"static/media/walfie_finana_chibi_1.854b00b6.gif\";","import { HTMLMotionProps, motion } from \"framer-motion\";\nimport { List, Map } from \"immutable\";\nimport { Fragment, useMemo } from \"react\";\n\nimport please_wait from \"./pomus/0/please_wait.png\";\nimport puffing_the_pomus from \"./pomus/0/puffing_the_pomus.png\";\nimport p1 from \"./pomus/1/p1.png\";\nimport walfie_pomu_chibi_1 from \"./pomus/2/walfie_pomu_chibi_1.gif\";\nimport walfie_pomu_chibi_2 from \"./pomus/3/walfie_pomu_chibi_2.gif\";\nimport walfie_pomu_chibi_3 from \"./pomus/4/walfie_pomu_chibi_3.gif\";\nimport walfie_finana_chibi_1 from \"./pomus/walfie_finana_chibi_1.gif\";\n\ntype AnimatedObject = {\n  src: string;\n  props: HTMLMotionProps<\"div\">;\n};\n\nfunction pct(n: number): string {\n  return `${n * 100}%`;\n}\n\nfunction ltdim(\n  left: number,\n  top: number,\n  width: number,\n  height: number\n): {\n  left: string;\n  top: string;\n  width: string;\n  height: string;\n} {\n  return {\n    left: pct(left / 1920),\n    top: pct(top / 1080),\n    width: pct(width / 1920),\n    height: pct(height / 1080),\n  };\n}\n\nfunction cdim(\n  x: number,\n  y: number,\n  width: number,\n  height: number\n): {\n  left: string;\n  top: string;\n  width: string;\n  height: string;\n} {\n  return ltdim(x - width / 2, y - height / 2, width, height);\n}\n\nconst OBJECT_GROUP_KEYS = [\n  \"bg_text\",\n  \"original_pomus\",\n  \"walfie_pomu_chibi_1\",\n  \"walfie_pomu_chibi_2\",\n  \"walfie_pomu_chibi_3\",\n  \"walfie_finana_chibi_1\",\n  \"walfie_pomu_chibi_3b\",\n] as const;\n\ntype ObjectGroupKey = typeof OBJECT_GROUP_KEYS[number];\n\ntype ObjectGroup = ReadonlyArray<AnimatedObject>;\n\nconst OBJECT_GROUPS: { [key in ObjectGroupKey]: ObjectGroup } = {\n  // Base text animated on the background\n  bg_text: [\n    {\n      src: puffing_the_pomus,\n      props: {\n        initial: { opacity: 0 },\n        animate: { opacity: [0, 1, 1, 0, 0] },\n        transition: {\n          duration: 10,\n          repeat: Infinity,\n          times: [0, 0.1, 0.35, 0.45, 1],\n        },\n        style: {\n          position: \"absolute\",\n          x: \"0%\",\n          y: \"0%\",\n          width: \"100%\",\n          height: \"100%\",\n        },\n      },\n    },\n    {\n      src: please_wait,\n      props: {\n        initial: { opacity: 0 },\n        animate: { opacity: [0, 1, 1, 0, 0] },\n        transition: {\n          repeat: Infinity,\n          duration: 10,\n          times: [0.55, 0.65, 0.9, 1, 1],\n        },\n        style: {\n          position: \"absolute\",\n          x: \"0%\",\n          y: \"0%\",\n          width: \"100%\",\n          height: \"100%\",\n        },\n      },\n    },\n  ],\n  // Original pomus since the debut stream\n  // https://www.youtube.com/watch?v=e0KSfSf7BuQ\n  original_pomus: [\n    {\n      src: p1,\n      props: {\n        style: {\n          ...cdim(328, 698, 508, 699),\n        },\n        animate: {\n          rotate: [\"15deg\", \"-15deg\"],\n        },\n        transition: {\n          duration: 1.2,\n          repeat: Infinity,\n          ease: (t: number): number => (t < 0.5 ? 0 : 1),\n        },\n      },\n    },\n  ],\n  // Chibi Pomu from @walfieee\n  // https://twitter.com/walfieee/status/1394080386431524868\n  // https://www.youtube.com/watch?v=FgoO57-TGkM\n  walfie_pomu_chibi_1: [\n    {\n      src: walfie_pomu_chibi_1,\n      props: {\n        style: {\n          ...ltdim(1343, 548, 576, 576),\n        },\n      },\n    },\n  ],\n  // Birthday chibi Pomu\n  // https://twitter.com/walfieee/status/1414435834246406150\n  walfie_pomu_chibi_2: [\n    {\n      src: walfie_pomu_chibi_2,\n      props: {\n        style: {\n          ...ltdim(1348, 536, 544, 544),\n        },\n      },\n    },\n  ],\n  // Money tossing chibi Pomu\n  // https://twitter.com/walfieee/status/1408645860813119489\n  walfie_pomu_chibi_3: [\n    {\n      src: walfie_pomu_chibi_3,\n      props: {\n        style: {\n          ...ltdim(987, 469, 568, 568),\n        },\n      },\n    },\n  ],\n  // Birthday chips eating chibi Finana\n  // https://twitter.com/walfieee/status/1407137606828187652\n  walfie_finana_chibi_1: [\n    {\n      src: walfie_finana_chibi_1,\n      props: {\n        style: {\n          ...ltdim(687, 599, 440, 450),\n        },\n      },\n    },\n  ],\n  // Money tossing chibi Pomu but in the bottom right\n  walfie_pomu_chibi_3b: [\n    {\n      src: walfie_pomu_chibi_3,\n      props: {\n        style: {\n          ...ltdim(1352, 512, 567, 567),\n        },\n      },\n    },\n  ],\n};\n\nconst VERSIONS: ReadonlyArray<ReadonlyArray<ObjectGroupKey>> = [\n  // Version 0, base bg text\n  [\"bg_text\"],\n  // Version 1, original pomus since debut stream\n  // https://www.youtube.com/watch?v=e0KSfSf7BuQ\n  [\"bg_text\", \"original_pomus\"],\n  // Version 2, with chibi Pomu\n  // https://www.youtube.com/watch?v=FgoO57-TGkM\n  [\"bg_text\", \"original_pomus\", \"walfie_pomu_chibi_1\"],\n  // Version 3, with birthday chibi Pomu\n  // https://www.youtube.com/watch?v=XsbJK2pINv0\n  // TODO: separate birthday stream version?\n  // https://www.youtube.com/watch?v=4vrD9dHHwao\n  [\"bg_text\", \"original_pomus\", \"walfie_pomu_chibi_2\"],\n  // With chibi Finana and chibi money Pomu\n  // https://www.youtube.com/watch?v=8zUb1CGCnZ0\n  [\"bg_text\", \"original_pomus\", \"walfie_pomu_chibi_3\", \"walfie_finana_chibi_1\"],\n  // Without Finana and chibi moved\n  // https://www.youtube.com/watch?v=ZRb4HsiQXc8\n  [\"bg_text\", \"original_pomus\", \"walfie_pomu_chibi_3b\"],\n  // Oh man it exploded\n  // https://www.youtube.com/watch?v=QE7uuTEezR0\n  // TODO\n  // Things adjusted\n  // https://www.youtube.com/watch?v=8_VeRNE7LhQ\n  // TODO\n  // Added one, readjusted one\n  // https://www.youtube.com/watch?v=944mNPsSu6Y\n  // TODO\n  // Added one, adjustments\n  // https://www.youtube.com/watch?v=gTPZMgQ-CRM\n  // TODO\n];\n\nexport const MAX_POMUS = VERSIONS.length - 1;\n\nexport default function usePomus(pomus: number): {\n  pomuElements: List<JSX.Element | null>;\n} {\n  const objectGroups = useMemo(\n    (): Map<ObjectGroupKey, JSX.Element> =>\n      Map(\n        OBJECT_GROUP_KEYS.map(\n          (key: ObjectGroupKey): [ObjectGroupKey, JSX.Element] => [\n            key,\n            <Fragment key={key}>\n              {OBJECT_GROUPS[key].map(\n                (object: AnimatedObject, index: number): JSX.Element => (\n                  <motion.div\n                    key={`${key}-${object.src}-${index}`}\n                    className=\"animated-object\"\n                    {...object.props}\n                  >\n                    <img src={object.src} alt=\"pomu\" />\n                  </motion.div>\n                )\n              )}\n            </Fragment>,\n          ]\n        )\n      ),\n    []\n  );\n\n  const pomuElements = useMemo(\n    (): List<JSX.Element | null> =>\n      List(\n        VERSIONS[pomus].map(\n          (key: ObjectGroupKey): JSX.Element | null =>\n            objectGroups.get(key) ?? null\n        )\n      ),\n    [objectGroups, pomus]\n  );\n\n  return {\n    pomuElements,\n  };\n}\n","import { ChangeEvent, useCallback, useEffect, useRef, useState } from \"react\";\n\nimport \"./App.scss\";\n\nimport playCircle from \"./play_circle_black_24dp.svg\";\nimport usePomus, { MAX_POMUS } from \"./usePomus\";\n\ntype Dimensions = {\n  width: number;\n  height: number;\n};\n\nexport default function App(): JSX.Element {\n  const audio = useRef<HTMLAudioElement>(null);\n  const main = useRef<HTMLDivElement>(null);\n  const stage = useRef<HTMLDivElement>(null);\n\n  const [containerSize, setContainerSize] = useState<Dimensions>({\n    width: 0,\n    height: 0,\n  });\n  const [paused, setPaused] = useState<boolean>(false);\n  const [pomus, setPomus] = useState<number>(MAX_POMUS);\n  const [shape, setShape] = useState<string>(\"\");\n  const [windowSize, setWindowSize] = useState<Dimensions>({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n\n  const { pomuElements } = usePomus(pomus);\n\n  const play = useCallback((): void => {\n    if (audio.current != null) {\n      audio.current.play();\n      audio.current.volume = 0.3;\n    }\n  }, []);\n\n  useEffect((): void => {\n    setInterval((): void => {\n      if (audio.current?.paused) {\n        setPaused(true);\n      } else {\n        setPaused(false);\n      }\n    }, 250);\n  }, []);\n\n  // Track the window size to maintain aspect ratio of the main scene\n  useEffect((): (() => void) => {\n    let debounce: ReturnType<typeof setTimeout>;\n    const handler = (): void => {\n      clearTimeout(debounce);\n      debounce = setTimeout(\n        (): void =>\n          setWindowSize({\n            width: window.innerWidth,\n            height: window.innerHeight,\n          }),\n        100\n      );\n    };\n\n    window.addEventListener(\"resize\", handler);\n\n    return (): void => window.removeEventListener(\"resize\", handler);\n  }, []);\n\n  useEffect((): void => {\n    // Dummy usage of windowSize to silence the linter\n    if (\n      main.current != null &&\n      windowSize.width >= 0 &&\n      windowSize.height >= 0\n    ) {\n      const mainRatio = main.current.offsetWidth / main.current.offsetHeight;\n      if (mainRatio > 16.0 / 9.0) {\n        // wide\n        setContainerSize({\n          width: (main.current.offsetHeight / 9.0) * 16.0,\n          height: main.current.offsetHeight,\n        });\n        setShape(\"wide\");\n      } else {\n        setContainerSize({\n          width: main.current.offsetWidth,\n          height: (main.current.offsetWidth / 16.0) * 9.0,\n        });\n        // narrow\n        setShape(\"narrow\");\n      }\n    }\n  }, [windowSize]);\n\n  return (\n    <div className=\"app\">\n      <header>\n        Pomu Intro Version: {pomus} {/* TODO: change to <select> for mobile */}\n        <input\n          type=\"range\"\n          min={0}\n          max={MAX_POMUS}\n          onChange={(e: ChangeEvent<HTMLInputElement>) =>\n            setPomus(parseInt(e.currentTarget.value))\n          }\n          value={pomus}\n        />\n        <button>?</button>\n      </header>\n      <main ref={main} className={shape}>\n        {paused ? (\n          <img\n            src={playCircle}\n            alt=\"play\"\n            className=\"play-audio\"\n            onClick={play}\n          />\n        ) : null}\n        <div\n          className=\"stage\"\n          ref={stage}\n          style={{\n            width: `${containerSize.width}px`,\n            height: `${containerSize.height}px`,\n          }}\n        >\n          {pomuElements.toJS()}\n        </div>\n      </main>\n      <audio\n        autoPlay={true}\n        loop={true}\n        src={`${process.env.PUBLIC_URL}/media/sheep.mp3`}\n        ref={audio}\n      />\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\n\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}